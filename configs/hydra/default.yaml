# https://hydra.cc/docs/configure_hydra/intro/

# enable color logging
defaults:
  - override hydra_logging: default
  - override job_logging: stdout

# output directory, generated dynamically on each run
run:
  dir: ${paths.log_dir}/${task_name}/runs/${now:%Y-%m-%d}_${now:%H-%M-%S}
sweep:
  dir: ${paths.log_dir}/${task_name}/multiruns/${now:%Y-%m-%d}_${now:%H-%M-%S}
  subdir: ${hydra.job.num}

job_logging:
  version: 1
  disable_existing_loggers: false
  formatters:
    simple:
      format: "%(levelname)s - %(message)s"
  handlers:
    file:
      class: logging.FileHandler
      formatter: simple
      filename: ${hydra.runtime.output_dir}/${task_name}.log
  root:
    level: INFO
    handlers: [file]

job:
  env_set:
    TF_ENABLE_ONEDNN_OPTS: "0"
    XLA_FLAGS: "--xla_gpu_cuda_data_dir="
    TF_CPP_MIN_LOG_LEVEL: "3"
    TF_TRT_ALLOW_ENGINE_NATIVE_SEGMENT_EXECUTION: "0"
